<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Clerk Login</title>
  <script async crossorigin="anonymous"
    data-clerk-publishable-key="pk_test_Z2FtZS1zd2FuLTYwLmNsZXJrLmFjY291bnRzLmRldiQ"
    src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js">
  </script>
</head>
<body>
  <div id="sign-in"></div>
  <script>
    window.Clerk.load().then(() => {
      window.Clerk.mountSignIn(document.getElementById("sign-in"));
      window.Clerk.addListener(({ user }) => {
        if (user) {
          user.getToken().then(token => {
            fetch("/auth/clerk", {
              method: "POST",
              headers: {
                "Authorization": `Bearer ${token}`
              }
            }).then(res => res.json())
            .then(data => window.location.href = data.redirect);
          });
        }
      });
    });
  </script>
</body>
</html>
